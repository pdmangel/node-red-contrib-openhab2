variables:
  PACKAGE_NAME: "node-red-contrib-openhab2"

stages:
- build

build_job:
  stage: build
  image: registry.bongers.co:5005/dev-ops/command-line-builder:latest
  script:
    - mkdir -p /rpool/docker/node-red-data/nodes/$PACKAGE_NAME
    - chown 1001:1001 /rpool/docker/node-red-data/nodes
    - rsync -r --exclude=".*" --exclude "reference" "$PWD/" /rpool/docker/node-red-data/nodes/$PACKAGE_NAME/
    - chown -R 1001:1001 /rpool/docker/node-red-data/nodes/$PACKAGE_NAME
    - docker stop node-red